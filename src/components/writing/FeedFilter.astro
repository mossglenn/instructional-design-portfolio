---
// Client-side filter component for the writing feed
---

<div
  id="writing-filter"
  class="mb-8 flex flex-wrap gap-3 items-center justify-center"
>
  <button
    data-filter="all"
    class="filter-btn active px-6 py-2 rounded-full font-medium transition-all duration-200
      bg-primary-600 text-white hover:bg-primary-700
      dark:bg-primary-500 dark:hover:bg-primary-600"
  >
    All Writing
  </button>
  <button
    data-filter="essay"
    class="filter-btn px-6 py-2 rounded-full font-medium transition-all duration-200
      bg-gray-200 text-gray-700 hover:bg-gray-300
      dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"
  >
    Essays
  </button>
  <button
    data-filter="note"
    class="filter-btn px-6 py-2 rounded-full font-medium transition-all duration-200
      bg-gray-200 text-gray-700 hover:bg-gray-300
      dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"
  >
    Notes
  </button>
</div>

<script>
  function initializeFilters() {    const filterButtons = document.querySelectorAll('.filter-btn');
    const posts = document.querySelectorAll('[data-post-type]');

    filterButtons.forEach((button) => {
      button.addEventListener('click', () => {
        const filter = button.getAttribute('data-filter');

        // Update active button
        filterButtons.forEach((btn) => {
          btn.classList.remove('active', 'bg-primary-600', 'text-white', 'dark:bg-primary-500');
          btn.classList.add('bg-gray-200', 'text-gray-700', 'dark:bg-gray-700', 'dark:text-gray-300');
        });
        button.classList.add('active', 'bg-primary-600', 'text-white', 'dark:bg-primary-500');
        button.classList.remove('bg-gray-200', 'text-gray-700', 'dark:bg-gray-700', 'dark:text-gray-300');

        // Filter posts
        posts.forEach((post) => {
          const postType = post.getAttribute('data-post-type');
          if (filter === 'all' || filter === postType) {
            post.classList.remove('hidden');
          } else {
            post.classList.add('hidden');
          }
        });
      });
    });
  }

  // Initialize on page load
  initializeFilters();

  // Re-initialize after Astro page transitions (if using View Transitions)
  document.addEventListener('astro:page-load', initializeFilters);
</script>
